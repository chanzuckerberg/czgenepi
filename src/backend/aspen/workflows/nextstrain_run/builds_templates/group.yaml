inputs:
##TODO: should move gisaid samples that match the county over & split this by
## "in jurisdiction" and "not in jurisdiction"
  - name: "gisaid"
    metadata: "data/metadata_gisaid.tsv"
    sequences: "data/sequences_gisaid.fasta"
  - name: "aspen"
    metadata: "data/metadata_aspen.tsv"
    sequences: "data/sequences_aspen.fasta"

builds:
  aspen:
    country: USA
    division: {division}
    location: {location}
    region: North America
    subsampling_scheme: group_only
    title: '{location}, {division}'

## custom rules
custom_rules:
  - my_profiles/aspen/subsampling_ranges.smk

## Auxiliary files
files:
  lat_longs: "my_profiles/aspen/lat_longs.tsv"
  ordering: "my_profiles/aspen/ordering.tsv"
  description: "my_profiles/aspen/covidtrackerca.md"
  auspice_config: "my_profiles/aspen/aspen_auspice_config.json"

## Parameters
refine:
  keep_polytomies: True

## Subsampling schemas
# Sampling groups that end with an `_early` suffix will omit data from the last 18 weeks.  Sampling groups that end with a `_late` suffix will only consider data from the last 18 weeks.
subsampling:
  group_only:
    group_by: "region" ## NOTE: this shouldn't do anything, but have to include the arg to trigger priority-based subsampling (old augur quirk)
    max_sequences: 3000
    query: --query "(location == '{{location}}') & (division == '{{division}}')"
    priorities:
      type: "file"
      file: "results/priorities.tsv"
