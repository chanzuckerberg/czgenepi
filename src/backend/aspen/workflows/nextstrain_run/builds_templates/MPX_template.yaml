subsampling_scheme: "OVERVIEW"

exclude: "config/exclude_accessions_mpxv.txt"
reference: "config/reference.fasta"
genemap: "config/genemap.gff"
genbank_reference: "config/reference.gb"
colors: "config/colors_mpxv.tsv"
lat_longs: "config/lat_longs.tsv"
auspice_config: "config/auspice_config_mpxv.json"
description: "config/description.md"
clades: "config/clades.tsv"
tree_mask: "config/tree_mask.tsv"

strain_id_field: "accession"
display_strain_field: "strain_original"

build_name: "mpxv"
auspice_name: "monkeypox_mpxv"

## align
max_indel: 10000
seed_spacing: 1000

## treefix
fix_tree: true

## refine
timetree: false
root: "min_dev"
clock_rate: 3e-6
clock_std_dev: 6e-6

## recency
recency: true

mask:
  from_beginning: 1350
  from_end: 6422
  maskfile: "config/mask_overview.bed"

## Subsampling schemas
subsampling:

  OVERVIEW:  # crowding penalty same as covid tree 
    group:
      subsample-max-sequences: 500
      query: "(country == '{country}')"    # from location filter. only country level. Do we support region level builds? As long as the options in filter is consistent with yaml builder, all should be good.
      min-length: 100000

    outside_group:
      subsample-max-sequences: 400
      query: --query "(country != '{country}')"  # optional to add: AND country is empty
      priorities:
        type: "proximity"
        focus: "group"
      min-length: 100000

    international_serial_sampling:
      group-by: ["region", "year"]  # lots of samples have no "month" so in order to include them, we'll only go by "year"
      sequences-per-group: 2
      query: "(country != '{country}')"   # optional to add: AND country is empty
      min-length: 100000

  TARGETED:
    focal:
      exclude-all: true
      include: config/include.txt

    closest:
      subsample-max-sequences: 10   # this changes with number of samples in include.txt and that's good
      min-length: 10000
      min-date: "2022-01-01"
      priorities:
        type: "proximity"
        focus: "focal"

    group:
      subsample-max-sequences: 10   # this changes with number of samples in include.txt and that's good
      query: "(country == '{country}')"
      priorities:
        type: "proximity"
        focus: "focal"
      min-length: 100000
      
    international_serial_sampling:
      group-by: ["region", "year"]
      sequences-per-group: 2
      query: "(country != '{country}')"
      min-length: 100000


  NON_CONTEXTUALIZED:
    group:
      group-by: "year"
      subsample-max-sequences: 1000
      query: "(country == '{country}')"
      min-length: 100000
